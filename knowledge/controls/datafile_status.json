{
  "control_id": "datafile_status",
  "version": "1.0.0",
  "title": "Datafile Status / Veri Dosyası Durumu",
  "description": "Shows datafile status (ONLINE, OFFLINE, RECOVER) and space utilization",
  "intent": "performance",
  "keywords": {
    "en": [
      "datafile",
      "offline",
      "recovery",
      "restore",
      "status",
      "datafile status",
      "file status",
      "recovery status"
    ],
    "tr": [
      "veri dosyası",
      "çevrimdışı",
      "kurtarma",
      "geri yükleme",
      "durum",
      "dosya durumu",
      "veri dosyası durumu"
    ]
  },
  "queries": [
    {
      "query_id": "datafile_status_check",
      "sql": "SELECT df.file#, df.name, df.status, df.bytes / (1024*1024*1024) GB, df.creation_change#, ROUND(100 * (df.bytes - nvl(sum(fs.bytes), 0)) / df.bytes) pct_used FROM v$datafile df LEFT JOIN dba_free_space fs ON df.file# = fs.file_id GROUP BY df.file#, df.name, df.status, df.bytes, df.creation_change# ORDER BY df.file#",
      "binds": [],
      "row_limit": 500,
      "timeout_seconds": 30,
      "result_schema": [
        {
          "name": "FILE#",
          "type": "NUMBER",
          "sensitive": false
        },
        {
          "name": "NAME",
          "type": "VARCHAR2",
          "sensitive": false
        },
        {
          "name": "STATUS",
          "type": "VARCHAR2",
          "sensitive": false
        },
        {
          "name": "GB",
          "type": "NUMBER",
          "sensitive": false
        },
        {
          "name": "CREATION_CHANGE#",
          "type": "NUMBER",
          "sensitive": false
        },
        {
          "name": "PCT_USED",
          "type": "NUMBER",
          "sensitive": false
        }
      ]
    }
  ],
  "doc_hint": "Shows datafile status (ONLINE, OFFLINE, RECOVER, etc.) and space utilization. OFFLINE or RECOVER status requires investigation.",
  "analysis_prompt": "Check datafile status. Report: (1) any offline/recover files, (2) which tablespaces are nearly full, (3) recommend growth/archival for high-utilization files.",
  "safety_classification": "SAFE_READONLY"
}