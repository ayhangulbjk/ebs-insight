{
  "control_id": "tablespace_usage",
  "version": "1.0.0",
  "title": "Tablespace Usage / Tablo Alanı Kullanımı",
  "description": "Shows tablespace usage percentages and free space",
  "intent": "storage",
  "keywords": ["tablo alanı", "tablespace", "kullanım", "usage", "dolu", "full", "alan", "space"],
  "queries": [
    {
      "query_id": "tablespace_summary",
      "sql": "SELECT ts.tablespace_name, ts.status, ROUND(ts.sum_free_space / (1024*1024*1024), 2) free_gb, ROUND(ts.sum_bytes / (1024*1024*1024), 2) total_gb, ROUND(100 * (1 - ts.sum_free_space / ts.sum_bytes)) pct_used FROM (SELECT tablespace_name, status, SUM(bytes) sum_bytes FROM dba_data_files GROUP BY tablespace_name, status) ts LEFT JOIN (SELECT tablespace_id, SUM(bytes) sum_free_space FROM dba_free_space GROUP BY tablespace_id) fs ON 1=1 ORDER BY pct_used DESC",
      "binds": [],
      "row_limit": 100,
      "timeout_seconds": 30,
      "result_schema": ["TABLESPACE_NAME", "STATUS", "FREE_GB", "TOTAL_GB", "PCT_USED"]
    }
  ],
  "doc_hint": "Shows tablespace usage percentages. Values > 85% warrant attention. Check for growth and archival opportunities.",
  "analysis_prompt": "Summarize tablespace utilization. Report: (1) which tablespaces are > 85% full, (2) total free space available, (3) recommend growth for critical tablespaces.",
  "safety_classification": "SAFE_READONLY"
}
