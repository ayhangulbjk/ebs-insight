{
  "control_id": "lock_analysis_detail",
  "version": "1.0.0",
  "title": "Lock Analysis Detail / Kilit Analizi Detay",
  "description": "Detailed analysis of database locks including blocking locks, lock holders, and lock waiters to diagnose locking contention",
  "intent": "performance",
  "keywords": {
    "en": ["lock", "blocking lock", "lock holder", "lock waiter", "lock type", "lock contention", "block session", "deadlock"],
    "tr": ["kilit", "kilitleyici kilit", "kilit sahibi", "kilit bekleyici", "kilit türü", "kilit çatışması", "engelleme oturumu", "kilitlenme"]
  },
  "queries": [
    {
      "query_id": "q_lock_analysis_v1",
      "sql": "SELECT BLOCKING_SESSION, SID, SERIAL#, WAIT_CLASS, SECONDS_IN_WAIT, EVENT FROM V$SESSION WHERE BLOCKING_SESSION IS NOT NULL ORDER BY SECONDS_IN_WAIT DESC",
      "binds": {},
      "row_limit": 100,
      "timeout_seconds": 30,
      "result_schema": [
        {"name": "BLOCKING_SESSION", "type": "NUMBER", "sensitive": false},
        {"name": "SID", "type": "NUMBER", "sensitive": false},
        {"name": "SERIAL#", "type": "NUMBER", "sensitive": false},
        {"name": "WAIT_CLASS", "type": "VARCHAR2", "sensitive": false},
        {"name": "SECONDS_IN_WAIT", "type": "NUMBER", "sensitive": false},
        {"name": "EVENT", "type": "VARCHAR2", "sensitive": false}
      ]
    }
  ],
  "safety_classification": "SAFE_READONLY",
  "doc_hint": "Any row indicates an active lock. Identify BLOCKING_SESSION and investigate its activity. Long SECONDS_IN_WAIT indicates potential deadlock or lock escalation.",
  "analysis_prompt": "Report any active locks with blocking sessions. Identify top lock holders. Recommend kill session if lock is prolonged or causing performance degradation."
}
